#!/usr/bin/env bash

source include

./build fast || exit 1

file_tree=../data/Newick.tree

if [[ $1 == "s" ]]
then
    msg "EvoMod-Sim; substitution model."
    stack exec evomod-sim -- \
          -t $file_tree -o evomod-sim.out -m "HKY[6.0]{0.2,0.3,0.3,0.2}" -l 10000 -s [0] || exit 1
elif [[ $1 == "e" ]]
then
    msg "EvoMod-Sim; empirical distribution mixture model."
    file_edm=../data/EDMDistsPhylobayes.txt
    stack exec evomod-sim -- \
          -t $file_tree -o evomod-sim.out -e $file_edm -m "EDM[LG-Custom]" -l 1000 -s [0] || exit 1
elif [[ $1 == "w" ]]
then
    msg "EvoMod-Sim; empirical distribution mixture model with custom weights."
    file_edm=../data/EDMDistsPhylobayes.txt
    stack exec evomod-sim -- \
          -t $file_tree -o evomod-sim.out -e $file_edm -m "EDM[LG-Custom]" -w "[0.9,0.05,0.03,0.02]" -l 1000 -s [0] || exit 1
else
    msg "Usage: ./evomod-sim (s|e|w)"
    exit 1
fi

